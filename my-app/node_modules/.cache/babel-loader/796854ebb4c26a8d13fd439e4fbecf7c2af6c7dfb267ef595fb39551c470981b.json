{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import defaultImage from\"../assets/defaultImage.jpg\";import{Container,Row,Col,Card}from'react-bootstrap';import{axiosReq}from'../api/axiosDefaults';import styles from'../App.module.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ProfilePage=()=>{const{id}=useParams();const[profile,setProfile]=useState(null);const[name,setName]=useState('');const[content,setContent]=useState('');const[image,setImage]=useState(null);const[editing,setEditing]=useState(false);const[teams,setTeams]=useState([]);const handleImageError=e=>{e.target.src=defaultImage;};useEffect(()=>{const fetchProfile=async()=>{try{const response=await axiosReq.get(`/profiles/${id?id:'me'}/`);setProfile(response.data);setName(response.data.name);setContent(response.data.content);}catch(error){console.error('Error fetching profile:',error);}};fetchProfile();},[id]);useEffect(()=>{const fetchTeams=async()=>{if(profile){try{const response=await axiosReq.get('/teams/');const userTeams=response.data.filter(team=>team.users.some(user=>user.id===(id?parseInt(id):profile.owner.id)));setTeams(userTeams);}catch(error){console.error('Error fetching teams:',error);}}};fetchTeams();},[profile,id]);const handleSubmit=async e=>{e.preventDefault();try{const formData=new FormData();formData.append('name',name);formData.append('content',content);if(image){formData.append('image',image);}const response=await axiosReq.put(`/profiles/${id?id:'me'}/`,formData,{headers:{'Content-Type':'multipart/form-data'}});setProfile(response.data);setEditing(false);}catch(error){var _error$response,_error$response2;console.error('Error updating profile:',(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data);alert('Failed to update profile: '+JSON.stringify((_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.data));}};if(!profile){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsxs(Container,{className:styles.App,children:[/*#__PURE__*/_jsx(\"h2\",{className:styles.textWhite,children:\"User Profile\"}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:5,className:`mb-4 ${styles.Content}`,children:[/*#__PURE__*/_jsx(\"img\",{src:profile.image||defaultImage,alt:\"Profile\",className:styles.Image,onError:handleImageError}),/*#__PURE__*/_jsx(\"h3\",{className:styles.textWhite,children:profile.username}),editing?/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,encType:\"multipart/form-data\",className:styles.Content,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",className:styles.formLabel,children:\"Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",value:name,onChange:e=>setName(e.target.value),required:true,className:\"form-control\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"content\",className:styles.formLabel,children:\"Bio:\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"content\",value:content,onChange:e=>setContent(e.target.value),className:\"form-control\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"image\",className:styles.formLabel,children:\"Profile Image:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"image\",onChange:e=>setImage(e.target.files[0]),accept:\"image/*\",className:\"form-control\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary mt-2\",children:\"Update Profile\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setEditing(false),className:\"btn btn-secondary mt-2\",children:\"Cancel\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{children:profile.name}),/*#__PURE__*/_jsx(\"p\",{children:profile.content}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditing(true),className:\"btn btn-warning\",children:\"Edit Profile\"})]})]}),/*#__PURE__*/_jsx(Col,{md:1}),/*#__PURE__*/_jsxs(Col,{md:6,className:styles.Content,children:[/*#__PURE__*/_jsx(\"h3\",{className:styles.textWhite,children:\"Teams\"}),teams.map(team=>/*#__PURE__*/_jsx(Card,{className:`${styles.cardCustom} mb-3`,children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:team.name}),/*#__PURE__*/_jsx(Card.Text,{children:team.description})]})},team.id))]})]})]});};export default ProfilePage;","map":{"version":3,"names":["React","useState","useEffect","useParams","defaultImage","Container","Row","Col","Card","axiosReq","styles","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProfilePage","id","profile","setProfile","name","setName","content","setContent","image","setImage","editing","setEditing","teams","setTeams","handleImageError","e","target","src","fetchProfile","response","get","data","error","console","fetchTeams","userTeams","filter","team","users","some","user","parseInt","owner","handleSubmit","preventDefault","formData","FormData","append","put","headers","_error$response","_error$response2","alert","JSON","stringify","children","className","App","textWhite","md","Content","alt","Image","onError","username","onSubmit","encType","htmlFor","formLabel","type","value","onChange","required","files","accept","onClick","map","cardCustom","Body","Title","Text","description"],"sources":["/Users/leighallen/Documents/GitHub/React-ProductiveYou/my-app/src/pages/Profile.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport defaultImage from \"../assets/defaultImage.jpg\";\nimport { Container, Row, Col, Card } from 'react-bootstrap';\nimport { axiosReq } from '../api/axiosDefaults';\nimport styles from '../App.module.css';\n\nconst ProfilePage = () => {\n  const { id } = useParams();\n\n  const [profile, setProfile] = useState(null);\n  const [name, setName] = useState('');\n  const [content, setContent] = useState('');\n  const [image, setImage] = useState(null);\n  const [editing, setEditing] = useState(false);\n  const [teams, setTeams] = useState([]);\n\n  const handleImageError = (e) => {\n    e.target.src = defaultImage;\n  }\n\n  useEffect(() => {\n    const fetchProfile = async () => {\n      try {\n        const response = await axiosReq.get(`/profiles/${id ? id : 'me'}/`);\n        setProfile(response.data);\n        setName(response.data.name);\n        setContent(response.data.content);\n      } catch (error) {\n        console.error('Error fetching profile:', error);\n      }\n    };\n\n    fetchProfile();\n  }, [id]);\n\n  useEffect(() => {\n    const fetchTeams = async () => {\n      if (profile) {\n        try {\n          const response = await axiosReq.get('/teams/');\n          const userTeams = response.data.filter(team =>\n            team.users.some(user => user.id === (id ? parseInt(id) : profile.owner.id))\n          );\n          setTeams(userTeams);\n        } catch (error) {\n          console.error('Error fetching teams:', error);\n        }\n      }\n    };\n\n    fetchTeams();\n  }, [profile, id]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const formData = new FormData();\n      formData.append('name', name);\n      formData.append('content', content);\n      if (image) {\n        formData.append('image', image);\n      }\n\n      const response = await axiosReq.put(`/profiles/${id ? id : 'me'}/`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      });\n\n      setProfile(response.data);\n      setEditing(false);\n    } catch (error) {\n      console.error('Error updating profile:', error.response?.data);\n      alert('Failed to update profile: ' + JSON.stringify(error.response?.data));\n    }\n  };\n\n  if (!profile) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <Container className={styles.App}>\n      <h2 className={styles.textWhite}>User Profile</h2>\n      <Row>\n        <Col md={5} className={`mb-4 ${styles.Content}`}>\n          <img\n            src={profile.image || defaultImage}\n            alt=\"Profile\"\n            className={styles.Image}\n            onError={handleImageError}\n          />\n          <h3 className={styles.textWhite}>{profile.username}</h3>\n          {editing ? (\n            <form onSubmit={handleSubmit} encType=\"multipart/form-data\" className={styles.Content}>\n              <label htmlFor=\"name\" className={styles.formLabel}>Name:</label>\n              <input\n                type=\"text\"\n                id=\"name\"\n                value={name}\n                onChange={(e) => setName(e.target.value)}\n                required\n                className=\"form-control\"\n              />\n              <label htmlFor=\"content\" className={styles.formLabel}>Bio:</label>\n              <textarea\n                id=\"content\"\n                value={content}\n                onChange={(e) => setContent(e.target.value)}\n                className=\"form-control\"\n              />\n              <label htmlFor=\"image\" className={styles.formLabel}>Profile Image:</label>\n              <input\n                type=\"file\"\n                id=\"image\"\n                onChange={(e) => setImage(e.target.files[0])}\n                accept=\"image/*\"\n                className=\"form-control\"\n              />\n              <button type=\"submit\" className=\"btn btn-primary mt-2\">Update Profile</button>\n              <button type=\"button\" onClick={() => setEditing(false)} className=\"btn btn-secondary mt-2\">Cancel</button>\n            </form>\n          ) : (\n            <>\n              <p>{profile.name}</p>\n              <p>{profile.content}</p>\n              <button onClick={() => setEditing(true)} className=\"btn btn-warning\">Edit Profile</button>\n            </>\n          )}\n        </Col>\n        <Col md={1}></Col>\n        <Col md={6} className={styles.Content}>\n          <h3 className={styles.textWhite}>Teams</h3>\n          {teams.map(team => (\n            <Card key={team.id} className={`${styles.cardCustom} mb-3`}>\n              <Card.Body>\n                <Card.Title>{team.name}</Card.Title>\n                <Card.Text>{team.description}</Card.Text>\n              </Card.Body>\n            </Card>\n          ))}\n        </Col>\n      </Row>\n    </Container>\n  );\n};\n\nexport default ProfilePage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}