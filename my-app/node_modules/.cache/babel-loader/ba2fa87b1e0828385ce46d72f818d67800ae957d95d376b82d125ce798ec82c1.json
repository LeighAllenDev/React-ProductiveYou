{"ast":null,"code":"import React,{useState}from\"react\";import axios from\"axios\";import{Link,useNavigate}from\"react-router-dom\";import{Form,Button,Alert,Container,Row,Col,Image}from\"react-bootstrap\";import signin from\"../assets/signin.jpg\";import styles from\"../styles/SignInUpForm.module.css\";import btnStyles from\"../styles/Button.module.css\";import appStyles from\"../styles/App.module.css\";import{useSetCurrentUser}from\"../contexts/CurrentUser\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function SignInForm(){var _errors$username,_errors$password,_errors$non_field_err;const setCurrentUser=useSetCurrentUser();const navigate=useNavigate();const[signInData,setSignInData]=useState({username:\"\",password:\"\"});const[errors,setErrors]=useState({});const handleSubmit=async event=>{event.preventDefault();if(!signInData.username||!signInData.password){setErrors({non_field_errors:[\"Both fields are required.\"]});return;}try{const{data}=await axios.post(\"/dj-rest-auth/login/\",signInData,{withCredentials:true}// Ensure cookies are sent\n);setCurrentUser(data.user);navigate(\"/\");// Redirect to the homepage\n}catch(err){if(err.response&&err.response.data){setErrors(err.response.data);}else{console.error(\"Unexpected error occurred:\",err);setErrors({non_field_errors:[\"An unexpected error occurred. Please try again later.\"]});}}};const handleChange=event=>{const{name,value}=event.target;setSignInData(prevData=>({...prevData,[name]:value}));};return/*#__PURE__*/_jsxs(Row,{className:styles.Row,children:[/*#__PURE__*/_jsxs(Col,{className:\"my-auto p-0 p-md-2 App\",md:6,children:[/*#__PURE__*/_jsxs(Container,{className:`${appStyles.Content} p-4`,children:[/*#__PURE__*/_jsx(\"h1\",{className:styles.Header,children:\"Sign In\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"username\",children:[/*#__PURE__*/_jsx(Form.Label,{className:\"visually-hidden\",children:\"Username\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Username\",name:\"username\",className:styles.Input,value:signInData.username,onChange:handleChange,\"aria-label\":\"Username\"// Accessibility improvement\n}),(_errors$username=errors.username)===null||_errors$username===void 0?void 0:_errors$username.map((message,idx)=>/*#__PURE__*/_jsx(Alert,{variant:\"warning\",className:\"mt-2\",children:message},idx))]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{className:\"visually-hidden\",children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Password\",name:\"password\",className:styles.Input,value:signInData.password,onChange:handleChange,\"aria-label\":\"Password\"// Accessibility improvement\n}),(_errors$password=errors.password)===null||_errors$password===void 0?void 0:_errors$password.map((message,idx)=>/*#__PURE__*/_jsx(Alert,{variant:\"warning\",className:\"mt-2\",children:message},idx))]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",className:`${btnStyles.Button} ${btnStyles.Wide} ${btnStyles.Bright}`,children:\"Sign In\"}),(_errors$non_field_err=errors.non_field_errors)===null||_errors$non_field_err===void 0?void 0:_errors$non_field_err.map((message,idx)=>/*#__PURE__*/_jsx(Alert,{variant:\"warning\",className:\"mt-3\",children:message},idx))]})]}),/*#__PURE__*/_jsx(Container,{className:`mt-3 ${appStyles.Content}`,children:/*#__PURE__*/_jsxs(Link,{className:styles.Link,to:\"/signup\",children:[\"Don't have an account? \",/*#__PURE__*/_jsx(\"span\",{children:\"Sign up now!\"})]})})]}),/*#__PURE__*/_jsx(Col,{md:6,className:`my-auto d-none d-md-block p-2 ${styles.SignInCol}`,children:/*#__PURE__*/_jsx(Image,{className:`${appStyles.FillerImage}`,src:signin,alt:\"Sign in visual\"})})]});}export default SignInForm;","map":{"version":3,"names":["React","useState","axios","Link","useNavigate","Form","Button","Alert","Container","Row","Col","Image","signin","styles","btnStyles","appStyles","useSetCurrentUser","jsx","_jsx","jsxs","_jsxs","SignInForm","_errors$username","_errors$password","_errors$non_field_err","setCurrentUser","navigate","signInData","setSignInData","username","password","errors","setErrors","handleSubmit","event","preventDefault","non_field_errors","data","post","withCredentials","user","err","response","console","error","handleChange","name","value","target","prevData","className","children","md","Content","Header","onSubmit","Group","controlId","Label","Control","type","placeholder","Input","onChange","map","message","idx","variant","Wide","Bright","to","SignInCol","FillerImage","src","alt"],"sources":["/Users/leighallen/Documents/GitHub/React-ProductiveYou/my-app/src/pages/SignInForm.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { Form, Button, Alert, Container, Row, Col, Image } from \"react-bootstrap\";\nimport signin from \"../assets/signin.jpg\";\nimport styles from \"../styles/SignInUpForm.module.css\";\nimport btnStyles from \"../styles/Button.module.css\";\nimport appStyles from \"../styles/App.module.css\";\nimport { useSetCurrentUser } from \"../contexts/CurrentUser\";\n\nfunction SignInForm() {\n  const setCurrentUser = useSetCurrentUser();\n  const navigate = useNavigate();\n\n  const [signInData, setSignInData] = useState({\n    username: \"\",\n    password: \"\",\n  });\n\n  const [errors, setErrors] = useState({});\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n  \n    if (!signInData.username || !signInData.password) {\n      setErrors({ non_field_errors: [\"Both fields are required.\"] });\n      return;\n    }\n  \n    try {\n      const { data } = await axios.post(\n        \"/dj-rest-auth/login/\",\n        signInData,\n        { withCredentials: true } // Ensure cookies are sent\n      );\n      setCurrentUser(data.user);\n      navigate(\"/\"); // Redirect to the homepage\n    } catch (err) {\n      if (err.response && err.response.data) {\n        setErrors(err.response.data);\n      } else {\n        console.error(\"Unexpected error occurred:\", err);\n        setErrors({ non_field_errors: [\"An unexpected error occurred. Please try again later.\"] });\n      }\n    }\n  };\n\n  const handleChange = (event) => {\n    const { name, value } = event.target;\n    setSignInData((prevData) => ({\n      ...prevData,\n      [name]: value,\n    }));\n  };\n\n  return (\n    <Row className={styles.Row}>\n      <Col className=\"my-auto p-0 p-md-2 App\" md={6}>\n        <Container className={`${appStyles.Content} p-4`}>\n          <h1 className={styles.Header}>Sign In</h1>\n          <Form onSubmit={handleSubmit}>\n            <Form.Group controlId=\"username\">\n              <Form.Label className=\"visually-hidden\">Username</Form.Label>\n              <Form.Control\n                type=\"text\"\n                placeholder=\"Username\"\n                name=\"username\"\n                className={styles.Input}\n                value={signInData.username}\n                onChange={handleChange}\n                aria-label=\"Username\" // Accessibility improvement\n              />\n              {errors.username?.map((message, idx) => (\n                <Alert key={idx} variant=\"warning\" className=\"mt-2\">\n                  {message}\n                </Alert>\n              ))}\n            </Form.Group>\n\n            <Form.Group controlId=\"password\">\n              <Form.Label className=\"visually-hidden\">Password</Form.Label>\n              <Form.Control\n                type=\"password\"\n                placeholder=\"Password\"\n                name=\"password\"\n                className={styles.Input}\n                value={signInData.password}\n                onChange={handleChange}\n                aria-label=\"Password\" // Accessibility improvement\n              />\n              {errors.password?.map((message, idx) => (\n                <Alert key={idx} variant=\"warning\" className=\"mt-2\">\n                  {message}\n                </Alert>\n              ))}\n            </Form.Group>\n\n            <Button\n              variant=\"primary\"\n              type=\"submit\"\n              className={`${btnStyles.Button} ${btnStyles.Wide} ${btnStyles.Bright}`}\n            >\n              Sign In\n            </Button>\n\n            {errors.non_field_errors?.map((message, idx) => (\n              <Alert key={idx} variant=\"warning\" className=\"mt-3\">\n                {message}\n              </Alert>\n            ))}\n          </Form>\n        </Container>\n\n        <Container className={`mt-3 ${appStyles.Content}`}>\n          <Link className={styles.Link} to=\"/signup\">\n            Don't have an account? <span>Sign up now!</span>\n          </Link>\n        </Container>\n      </Col>\n\n      <Col md={6} className={`my-auto d-none d-md-block p-2 ${styles.SignInCol}`}>\n        <Image className={`${appStyles.FillerImage}`} src={signin} alt=\"Sign in visual\" />\n      </Col>\n    </Row>\n  );\n}\n\nexport default SignInForm;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,IAAI,CAAEC,WAAW,KAAQ,kBAAkB,CACpD,OAASC,IAAI,CAAEC,MAAM,CAAEC,KAAK,CAAEC,SAAS,CAAEC,GAAG,CAAEC,GAAG,CAAEC,KAAK,KAAQ,iBAAiB,CACjF,MAAO,CAAAC,MAAM,KAAM,sBAAsB,CACzC,MAAO,CAAAC,MAAM,KAAM,mCAAmC,CACtD,MAAO,CAAAC,SAAS,KAAM,6BAA6B,CACnD,MAAO,CAAAC,SAAS,KAAM,0BAA0B,CAChD,OAASC,iBAAiB,KAAQ,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE5D,QAAS,CAAAC,UAAUA,CAAA,CAAG,KAAAC,gBAAA,CAAAC,gBAAA,CAAAC,qBAAA,CACpB,KAAM,CAAAC,cAAc,CAAGT,iBAAiB,CAAC,CAAC,CAC1C,KAAM,CAAAU,QAAQ,CAAGtB,WAAW,CAAC,CAAC,CAE9B,KAAM,CAACuB,UAAU,CAAEC,aAAa,CAAC,CAAG3B,QAAQ,CAAC,CAC3C4B,QAAQ,CAAE,EAAE,CACZC,QAAQ,CAAE,EACZ,CAAC,CAAC,CAEF,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAG/B,QAAQ,CAAC,CAAC,CAAC,CAAC,CAExC,KAAM,CAAAgC,YAAY,CAAG,KAAO,CAAAC,KAAK,EAAK,CACpCA,KAAK,CAACC,cAAc,CAAC,CAAC,CAEtB,GAAI,CAACR,UAAU,CAACE,QAAQ,EAAI,CAACF,UAAU,CAACG,QAAQ,CAAE,CAChDE,SAAS,CAAC,CAAEI,gBAAgB,CAAE,CAAC,2BAA2B,CAAE,CAAC,CAAC,CAC9D,OACF,CAEA,GAAI,CACF,KAAM,CAAEC,IAAK,CAAC,CAAG,KAAM,CAAAnC,KAAK,CAACoC,IAAI,CAC/B,sBAAsB,CACtBX,UAAU,CACV,CAAEY,eAAe,CAAE,IAAK,CAAE;AAC5B,CAAC,CACDd,cAAc,CAACY,IAAI,CAACG,IAAI,CAAC,CACzBd,QAAQ,CAAC,GAAG,CAAC,CAAE;AACjB,CAAE,MAAOe,GAAG,CAAE,CACZ,GAAIA,GAAG,CAACC,QAAQ,EAAID,GAAG,CAACC,QAAQ,CAACL,IAAI,CAAE,CACrCL,SAAS,CAACS,GAAG,CAACC,QAAQ,CAACL,IAAI,CAAC,CAC9B,CAAC,IAAM,CACLM,OAAO,CAACC,KAAK,CAAC,4BAA4B,CAAEH,GAAG,CAAC,CAChDT,SAAS,CAAC,CAAEI,gBAAgB,CAAE,CAAC,uDAAuD,CAAE,CAAC,CAAC,CAC5F,CACF,CACF,CAAC,CAED,KAAM,CAAAS,YAAY,CAAIX,KAAK,EAAK,CAC9B,KAAM,CAAEY,IAAI,CAAEC,KAAM,CAAC,CAAGb,KAAK,CAACc,MAAM,CACpCpB,aAAa,CAAEqB,QAAQ,GAAM,CAC3B,GAAGA,QAAQ,CACX,CAACH,IAAI,EAAGC,KACV,CAAC,CAAC,CAAC,CACL,CAAC,CAED,mBACE3B,KAAA,CAACX,GAAG,EAACyC,SAAS,CAAErC,MAAM,CAACJ,GAAI,CAAA0C,QAAA,eACzB/B,KAAA,CAACV,GAAG,EAACwC,SAAS,CAAC,wBAAwB,CAACE,EAAE,CAAE,CAAE,CAAAD,QAAA,eAC5C/B,KAAA,CAACZ,SAAS,EAAC0C,SAAS,CAAE,GAAGnC,SAAS,CAACsC,OAAO,MAAO,CAAAF,QAAA,eAC/CjC,IAAA,OAAIgC,SAAS,CAAErC,MAAM,CAACyC,MAAO,CAAAH,QAAA,CAAC,SAAO,CAAI,CAAC,cAC1C/B,KAAA,CAACf,IAAI,EAACkD,QAAQ,CAAEtB,YAAa,CAAAkB,QAAA,eAC3B/B,KAAA,CAACf,IAAI,CAACmD,KAAK,EAACC,SAAS,CAAC,UAAU,CAAAN,QAAA,eAC9BjC,IAAA,CAACb,IAAI,CAACqD,KAAK,EAACR,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAC,UAAQ,CAAY,CAAC,cAC7DjC,IAAA,CAACb,IAAI,CAACsD,OAAO,EACXC,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,UAAU,CACtBf,IAAI,CAAC,UAAU,CACfI,SAAS,CAAErC,MAAM,CAACiD,KAAM,CACxBf,KAAK,CAAEpB,UAAU,CAACE,QAAS,CAC3BkC,QAAQ,CAAElB,YAAa,CACvB,aAAW,UAAW;AAAA,CACvB,CAAC,EAAAvB,gBAAA,CACDS,MAAM,CAACF,QAAQ,UAAAP,gBAAA,iBAAfA,gBAAA,CAAiB0C,GAAG,CAAC,CAACC,OAAO,CAAEC,GAAG,gBACjChD,IAAA,CAACX,KAAK,EAAW4D,OAAO,CAAC,SAAS,CAACjB,SAAS,CAAC,MAAM,CAAAC,QAAA,CAChDc,OAAO,EADEC,GAEL,CACR,CAAC,EACQ,CAAC,cAEb9C,KAAA,CAACf,IAAI,CAACmD,KAAK,EAACC,SAAS,CAAC,UAAU,CAAAN,QAAA,eAC9BjC,IAAA,CAACb,IAAI,CAACqD,KAAK,EAACR,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAC,UAAQ,CAAY,CAAC,cAC7DjC,IAAA,CAACb,IAAI,CAACsD,OAAO,EACXC,IAAI,CAAC,UAAU,CACfC,WAAW,CAAC,UAAU,CACtBf,IAAI,CAAC,UAAU,CACfI,SAAS,CAAErC,MAAM,CAACiD,KAAM,CACxBf,KAAK,CAAEpB,UAAU,CAACG,QAAS,CAC3BiC,QAAQ,CAAElB,YAAa,CACvB,aAAW,UAAW;AAAA,CACvB,CAAC,EAAAtB,gBAAA,CACDQ,MAAM,CAACD,QAAQ,UAAAP,gBAAA,iBAAfA,gBAAA,CAAiByC,GAAG,CAAC,CAACC,OAAO,CAAEC,GAAG,gBACjChD,IAAA,CAACX,KAAK,EAAW4D,OAAO,CAAC,SAAS,CAACjB,SAAS,CAAC,MAAM,CAAAC,QAAA,CAChDc,OAAO,EADEC,GAEL,CACR,CAAC,EACQ,CAAC,cAEbhD,IAAA,CAACZ,MAAM,EACL6D,OAAO,CAAC,SAAS,CACjBP,IAAI,CAAC,QAAQ,CACbV,SAAS,CAAE,GAAGpC,SAAS,CAACR,MAAM,IAAIQ,SAAS,CAACsD,IAAI,IAAItD,SAAS,CAACuD,MAAM,EAAG,CAAAlB,QAAA,CACxE,SAED,CAAQ,CAAC,EAAA3B,qBAAA,CAERO,MAAM,CAACK,gBAAgB,UAAAZ,qBAAA,iBAAvBA,qBAAA,CAAyBwC,GAAG,CAAC,CAACC,OAAO,CAAEC,GAAG,gBACzChD,IAAA,CAACX,KAAK,EAAW4D,OAAO,CAAC,SAAS,CAACjB,SAAS,CAAC,MAAM,CAAAC,QAAA,CAChDc,OAAO,EADEC,GAEL,CACR,CAAC,EACE,CAAC,EACE,CAAC,cAEZhD,IAAA,CAACV,SAAS,EAAC0C,SAAS,CAAE,QAAQnC,SAAS,CAACsC,OAAO,EAAG,CAAAF,QAAA,cAChD/B,KAAA,CAACjB,IAAI,EAAC+C,SAAS,CAAErC,MAAM,CAACV,IAAK,CAACmE,EAAE,CAAC,SAAS,CAAAnB,QAAA,EAAC,yBAClB,cAAAjC,IAAA,SAAAiC,QAAA,CAAM,cAAY,CAAM,CAAC,EAC5C,CAAC,CACE,CAAC,EACT,CAAC,cAENjC,IAAA,CAACR,GAAG,EAAC0C,EAAE,CAAE,CAAE,CAACF,SAAS,CAAE,iCAAiCrC,MAAM,CAAC0D,SAAS,EAAG,CAAApB,QAAA,cACzEjC,IAAA,CAACP,KAAK,EAACuC,SAAS,CAAE,GAAGnC,SAAS,CAACyD,WAAW,EAAG,CAACC,GAAG,CAAE7D,MAAO,CAAC8D,GAAG,CAAC,gBAAgB,CAAE,CAAC,CAC/E,CAAC,EACH,CAAC,CAEV,CAEA,cAAe,CAAArD,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}